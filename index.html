<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DPR Consultoría - Pensiones e IMSS</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-900 font-sans">

    <section class="max-w-lg mx-auto mt-10 p-6 bg-white rounded-xl shadow-lg">
        <h2 class="text-2xl font-bold text-blue-800 mb-4">Solicitud de Asesoría</h2>
        <p class="text-sm text-gray-600 mb-6">Completa tus datos para iniciar tu análisis de pensión.</p>

        <form id="formSolicitud" class="space-y-4">
            <div>
                <label class="block text-sm font-medium">Nombre Completo</label>
                <input type="text" id="nombre" required class="w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none">
            </div>
            <div>
                <label class="block text-sm font-medium">WhatsApp / Teléfono</label>
                <input type="tel" id="telefono" required class="w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none">
            </div>
            <div>
                <label class="block text-sm font-medium">Servicio de Interés</label>
                <select id="servicio" class="w-full p-2 border rounded-md">
                    <option value="Analisis Rápido">Análisis Rápido ($200)</option>
                    <option value="Proyección de Pensión">Proyección de Pensión</option>
                    <option value="Corrección de Datos">Corrección de Datos</option>
                </select>
            </div>
            <button type="submit" id="btnEnviar" class="w-full bg-blue-700 text-white py-3 rounded-md font-bold hover:bg-blue-800 transition">
                Enviar Solicitud
            </button>
        </form>
        <p id="mensajeExito" class="hidden mt-4 text-green-600 font-medium text-center">¡Datos enviados con éxito!</p>
    </section>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        // CONFIGURACIÓN DE TU PROYECTO (Copia esto de tu consola de Firebase)
        const firebaseConfig = {
            apiKey: "TU_API_KEY",
            authDomain: "TU_PROYECTO.firebaseapp.com",
            projectId: "TU_PROYECTO_ID",
            storageBucket: "TU_PROYECTO.appspot.com",
            messagingSenderId: "TU_ID",
            appId: "TU_APP_ID"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // LÓGICA DEL FORMULARIO
        const form = document.getElementById('formSolicitud');
        
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = document.getElementById('btnEnviar');
            btn.disabled = true;
            btn.innerText = "Enviando...";

            try {
                await addDoc(collection(db, "solicitudes"), {
                    nombre: document.getElementById('nombre').value,
                    telefono: document.getElementById('telefono').value,
                    servicio: document.getElementById('servicio').value,
                    estatus: "Pendiente",
                    fecha: serverTimestamp() // ESTO GUARDA HORA Y SEGUNDO EXACTO
                });

                form.reset();
                document.getElementById('mensajeExito').classList.remove('hidden');
                btn.innerText = "Enviar Solicitud";
                btn.disabled = false;
            } catch (error) {
                console.error("Error al enviar:", error);
                alert("Hubo un error al enviar los datos.");
            }
        });
    </script>
</body>
</html>
